{
  "version": 3,
  "sources": ["theme.ts"],
  "sourcesContent": ["/**\n * ChatVibes Theme Manager\n * Handles theme switching functionality (light/dark mode)\n */\n\n// Make this file a module to allow global augmentation\nexport {};\n\n// Type definitions\ntype Theme = 'dark' | 'light';\n\n// Constants\nconst THEME_KEY = 'chatvibes-theme';\nconst DARK_THEME: Theme = 'dark';\nconst LIGHT_THEME: Theme = 'light';\n\n// Extend Window interface to include themeManager\ndeclare global {\n    interface Window {\n        themeManager: ThemeManager;\n    }\n}\n\nclass ThemeManager {\n    constructor() {\n        this.init();\n    }\n\n    init(): void {\n        // Set initial theme on page load\n        this.applyStoredTheme();\n\n        // Initialize toggle if present\n        this.initToggle();\n\n        // Listen for system theme changes\n        this.listenForSystemThemeChanges();\n    }\n\n    getStoredTheme(): Theme | null {\n        const stored = localStorage.getItem(THEME_KEY);\n        if (stored === DARK_THEME || stored === LIGHT_THEME) {\n            return stored;\n        }\n        // Clean up invalid value to prevent checking it on every page load\n        if (stored !== null) {\n            localStorage.removeItem(THEME_KEY);\n        }\n        return null;\n    }\n\n    getSystemTheme(): Theme {\n        return window.matchMedia('(prefers-color-scheme: dark)').matches ? DARK_THEME : LIGHT_THEME;\n    }\n\n    getCurrentTheme(): Theme {\n        return this.getStoredTheme() || this.getSystemTheme();\n    }\n\n    setTheme(theme: Theme): void {\n        if (theme === DARK_THEME) {\n            document.documentElement.setAttribute('data-theme', DARK_THEME);\n        } else {\n            document.documentElement.removeAttribute('data-theme');\n        }\n\n        localStorage.setItem(THEME_KEY, theme);\n        this.updateToggleState();\n    }\n\n    toggleTheme(): void {\n        const currentTheme = this.getCurrentTheme();\n        const newTheme: Theme = currentTheme === DARK_THEME ? LIGHT_THEME : DARK_THEME;\n        this.setTheme(newTheme);\n    }\n\n    applyStoredTheme(): void {\n        const theme = this.getCurrentTheme();\n        if (theme === DARK_THEME) {\n            document.documentElement.setAttribute('data-theme', DARK_THEME);\n        }\n        this.updateToggleState();\n    }\n\n    initToggle(): void {\n        const toggle = document.getElementById('darkModeToggle') as HTMLInputElement | null;\n        if (toggle) {\n            toggle.addEventListener('change', () => {\n                this.toggleTheme();\n            });\n            this.updateToggleState();\n        }\n    }\n\n    updateToggleState(): void {\n        const toggle = document.getElementById('darkModeToggle') as HTMLInputElement | null;\n        if (toggle) {\n            toggle.checked = this.getCurrentTheme() === DARK_THEME;\n        }\n    }\n\n    listenForSystemThemeChanges(): void {\n        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n        mediaQuery.addEventListener('change', (e: MediaQueryListEvent) => {\n            // Only apply system theme if user hasn't explicitly chosen a theme\n            if (!this.getStoredTheme()) {\n                const systemTheme: Theme = e.matches ? DARK_THEME : LIGHT_THEME;\n                this.setTheme(systemTheme);\n            }\n        });\n    }\n}\n\n// Initialize theme manager when DOM is ready\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n        window.themeManager = new ThemeManager();\n    });\n} else {\n    window.themeManager = new ThemeManager();\n}\n"],
  "mappings": "AAYA,MAAM,YAAY;AAClB,MAAM,aAAoB;AAC1B,MAAM,cAAqB;AAS3B,MAAM,aAAa;AAAA,EACf,cAAc;AACV,SAAK,KAAK;AAAA,EACd;AAAA,EAEA,OAAa;AAET,SAAK,iBAAiB;AAGtB,SAAK,WAAW;AAGhB,SAAK,4BAA4B;AAAA,EACrC;AAAA,EAEA,iBAA+B;AAC3B,UAAM,SAAS,aAAa,QAAQ,SAAS;AAC7C,QAAI,WAAW,cAAc,WAAW,aAAa;AACjD,aAAO;AAAA,IACX;AAEA,QAAI,WAAW,MAAM;AACjB,mBAAa,WAAW,SAAS;AAAA,IACrC;AACA,WAAO;AAAA,EACX;AAAA,EAEA,iBAAwB;AACpB,WAAO,OAAO,WAAW,8BAA8B,EAAE,UAAU,aAAa;AAAA,EACpF;AAAA,EAEA,kBAAyB;AACrB,WAAO,KAAK,eAAe,KAAK,KAAK,eAAe;AAAA,EACxD;AAAA,EAEA,SAAS,OAAoB;AACzB,QAAI,UAAU,YAAY;AACtB,eAAS,gBAAgB,aAAa,cAAc,UAAU;AAAA,IAClE,OAAO;AACH,eAAS,gBAAgB,gBAAgB,YAAY;AAAA,IACzD;AAEA,iBAAa,QAAQ,WAAW,KAAK;AACrC,SAAK,kBAAkB;AAAA,EAC3B;AAAA,EAEA,cAAoB;AAChB,UAAM,eAAe,KAAK,gBAAgB;AAC1C,UAAM,WAAkB,iBAAiB,aAAa,cAAc;AACpE,SAAK,SAAS,QAAQ;AAAA,EAC1B;AAAA,EAEA,mBAAyB;AACrB,UAAM,QAAQ,KAAK,gBAAgB;AACnC,QAAI,UAAU,YAAY;AACtB,eAAS,gBAAgB,aAAa,cAAc,UAAU;AAAA,IAClE;AACA,SAAK,kBAAkB;AAAA,EAC3B;AAAA,EAEA,aAAmB;AACf,UAAM,SAAS,SAAS,eAAe,gBAAgB;AACvD,QAAI,QAAQ;AACR,aAAO,iBAAiB,UAAU,MAAM;AACpC,aAAK,YAAY;AAAA,MACrB,CAAC;AACD,WAAK,kBAAkB;AAAA,IAC3B;AAAA,EACJ;AAAA,EAEA,oBAA0B;AACtB,UAAM,SAAS,SAAS,eAAe,gBAAgB;AACvD,QAAI,QAAQ;AACR,aAAO,UAAU,KAAK,gBAAgB,MAAM;AAAA,IAChD;AAAA,EACJ;AAAA,EAEA,8BAAoC;AAChC,UAAM,aAAa,OAAO,WAAW,8BAA8B;AACnE,eAAW,iBAAiB,UAAU,CAAC,MAA2B;AAE9D,UAAI,CAAC,KAAK,eAAe,GAAG;AACxB,cAAM,cAAqB,EAAE,UAAU,aAAa;AACpD,aAAK,SAAS,WAAW;AAAA,MAC7B;AAAA,IACJ,CAAC;AAAA,EACL;AACJ;AAGA,IAAI,SAAS,eAAe,WAAW;AACnC,WAAS,iBAAiB,oBAAoB,MAAM;AAChD,WAAO,eAAe,IAAI,aAAa;AAAA,EAC3C,CAAC;AACL,OAAO;AACH,SAAO,eAAe,IAAI,aAAa;AAC3C;",
  "names": []
}
