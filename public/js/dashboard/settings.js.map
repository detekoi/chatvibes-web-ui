{
  "version": 3,
  "sources": ["settings.ts"],
  "sourcesContent": ["import { showToast, syncTextareas } from '../common/ui.js';\nimport { debounce, formatVoiceName } from '../common/utils.js';\nimport { performVoiceTest, TTSPayload, PlayerElements, HintElements } from '../common/voice-preview.js';\nimport type { DashboardServices } from './types.js';\n\n/**\n * TTS settings stored in database\n */\nexport interface TtsSettings {\n  engineEnabled?: boolean;\n  botRespondsInChat?: boolean;\n  mode?: string;\n  ttsPermissionLevel?: string;\n  speakEvents?: boolean;\n  allowViewerPreferences?: boolean;\n  readFullUrls?: boolean;\n  bitsModeEnabled?: boolean;\n  bitsMinimumAmount?: number;\n  voiceId?: string;\n  emotion?: string;\n  pitch?: number;\n  speed?: number;\n  languageBoost?: string;\n  englishNormalization?: boolean;\n  ignoredUsers?: string[];\n}\n\n/**\n * Music settings stored in database\n */\nexport interface MusicSettings {\n  enabled?: boolean;\n  allowedRoles?: string[];\n  bitsModeEnabled?: boolean;\n  bitsMinimumAmount?: number;\n  ignoredUsers?: string[];\n}\n\n/**\n * API response for settings endpoints\n */\ninterface SettingsResponse {\n  settings: TtsSettings | MusicSettings;\n}\n\n/**\n * API response for voices endpoint\n */\ninterface VoicesResponse {\n  voices?: string[];\n}\n\n/**\n * Error response from API\n */\ninterface ErrorResponse {\n  error?: string;\n  message?: string;\n  details?: string;\n}\n\n/**\n * Context for settings module (extends base dashboard context)\n */\nexport interface SettingsModuleContext {\n  botApiBaseUrl: string;\n  testMode: boolean;\n}\n\n/**\n * Dependencies for settings module\n */\nexport interface SettingsModuleDependencies {\n  displayIgnoreList: (type: 'tts' | 'music', users: string[]) => void;\n}\n\n/**\n * Settings module interface\n */\nexport interface SettingsModule {\n  initialize: () => Promise<void>;\n  loadSettings: () => Promise<void>;\n}\n\n/**\n * Original settings cached for comparison\n */\ninterface OriginalSettings {\n  tts: TtsSettings;\n  music: MusicSettings;\n}\n\n/**\n * Handles dashboard settings (TTS defaults, music, voice preview, etc.).\n */\nexport function initSettingsModule(\n  context: SettingsModuleContext,\n  services: DashboardServices,\n  dependencies: SettingsModuleDependencies\n): SettingsModule {\n  const { botApiBaseUrl, testMode } = context;\n  const { getLoggedInUser, getSessionToken } = services;\n  const { displayIgnoreList } = dependencies;\n\n  // Settings Panel Elements\n  const defaultVoiceSelect = document.getElementById('default-voice') as HTMLInputElement | null;\n  const defaultEmotionSelect = document.getElementById('default-emotion') as HTMLSelectElement | null;\n  const defaultPitchSlider = document.getElementById('default-pitch') as HTMLInputElement | null;\n  const pitchValueSpan = document.getElementById('pitch-value') as HTMLSpanElement | null;\n  const defaultSpeedSlider = document.getElementById('default-speed') as HTMLInputElement | null;\n  const speedValueSpan = document.getElementById('speed-value') as HTMLSpanElement | null;\n  const resetPitchBtn = document.getElementById('reset-pitch-btn') as HTMLButtonElement | null;\n  const resetSpeedBtn = document.getElementById('reset-speed-btn') as HTMLButtonElement | null;\n  const defaultLanguageSelect = document.getElementById('default-language') as HTMLSelectElement | null;\n  const englishNormalizationCheckbox = document.getElementById('english-normalization') as HTMLInputElement | null;\n\n  const ttsEnabledCheckbox = document.getElementById('tts-enabled') as HTMLInputElement | null;\n  const botRespondsInChatCheckbox = document.getElementById('bot-responds-in-chat') as HTMLInputElement | null;\n  const ttsModeSelect = document.getElementById('tts-mode') as HTMLSelectElement | null;\n  const ttsPermissionSelect = document.getElementById('tts-permission') as HTMLSelectElement | null;\n  const eventsEnabledCheckbox = document.getElementById('events-enabled') as HTMLInputElement | null;\n  const allowViewerPreferencesCheckbox = document.getElementById('allow-viewer-preferences') as HTMLInputElement | null;\n  const readFullUrlsCheckbox = document.getElementById('read-full-urls') as HTMLInputElement | null;\n  const bitsEnabledCheckbox = document.getElementById('bits-enabled') as HTMLInputElement | null;\n  const bitsAmountInput = document.getElementById('bits-amount') as HTMLInputElement | null;\n  const musicEnabledCheckbox = document.getElementById('music-enabled') as HTMLInputElement | null;\n  const musicModeSelect = document.getElementById('music-mode') as HTMLSelectElement | null;\n  const musicBitsEnabledCheckbox = document.getElementById('music-bits-enabled') as HTMLInputElement | null;\n  const musicBitsAmountInput = document.getElementById('music-bits-amount') as HTMLInputElement | null;\n\n  const saveSettingsBtn = document.getElementById('save-settings-btn') as HTMLButtonElement | null;\n\n  const voiceTestTextInput = document.getElementById('voice-test-text') as HTMLTextAreaElement | null;\n  const voiceTestBtn = document.getElementById('voice-test-btn') as HTMLButtonElement | null;\n  const voiceTestTextInputMobile = document.getElementById('voice-test-text-mobile') as HTMLTextAreaElement | null;\n  const voiceTestBtnMobile = document.getElementById('voice-test-btn-mobile') as HTMLButtonElement | null;\n\n  if (voiceTestBtn) voiceTestBtn.disabled = true;\n  if (voiceTestBtnMobile) voiceTestBtnMobile.disabled = true;\n  syncTextareas(voiceTestTextInput, voiceTestTextInputMobile);\n\n  let originalSettings: OriginalSettings = { tts: {}, music: {} };\n  void originalSettings; // Intentionally unused - for future debugging/state tracking\n  let isInitializing = true;\n  let lastSuccessToastAt = 0;\n\n  let settingsInitialized = false;\n  void settingsInitialized; // Intentionally unused - for future state tracking\n  let settingsInitializedPromiseResolve: (() => void) | undefined;\n  const settingsInitializedPromise = new Promise<void>((resolve) => {\n    settingsInitializedPromiseResolve = resolve;\n  });\n\n  let allVoices: string[] = [];\n  void allVoices; // Intentionally unused - for future reference\n  let currentlyPlayingAudio: HTMLAudioElement | null = null;\n  let currentlyPlayingVoiceId: string | null = null;\n\n  let cachedAudioUrl: string | null = null;\n  let cachedAudioUrlMobile: string | null = null;\n  let cachedSettings: TTSPayload | null = null;\n  void cachedSettings; // Intentionally unused - for future caching optimization\n  let cachedSettingsMobile: TTSPayload | null = null;\n  void cachedSettingsMobile; // Intentionally unused - for future caching optimization\n  let isDirty = false;\n  void isDirty; // Intentionally unused - for future dirty state tracking\n  let isDirtyMobile = false;\n  void isDirtyMobile; // Intentionally unused - for future dirty state tracking\n\n  return {\n    async initialize(): Promise<void> {\n      await initializeSettingsPanel();\n    },\n    loadSettings: () => loadBotSettings(),\n  };\n\n  function maybeSuccessToast(message: string): void {\n    const now = Date.now();\n    if (now - lastSuccessToastAt > 5000) {\n      showToast(message, 'success');\n      lastSuccessToastAt = now;\n    }\n  }\n\n  async function playVoiceSample(buttonElement: HTMLButtonElement, voiceId: string): Promise<void> {\n    if (!voiceId) return;\n\n    if (currentlyPlayingVoiceId === voiceId && currentlyPlayingAudio) {\n      currentlyPlayingAudio.pause();\n      currentlyPlayingAudio = null;\n      currentlyPlayingVoiceId = null;\n      updatePlayButton(buttonElement, false);\n      return;\n    }\n\n    if (currentlyPlayingAudio) {\n      const previousBtn = document.querySelector('.voice-dropdown-item .voice-play-btn.playing') as HTMLButtonElement | null;\n      if (previousBtn) {\n        updatePlayButton(previousBtn, false);\n      }\n      currentlyPlayingAudio.pause();\n      currentlyPlayingAudio = null;\n    }\n\n    const preMadeUrl = `/assets/voices/${voiceId}-welcome-everyone-to-the-stream.mp3`;\n\n    try {\n      const response = await fetch(preMadeUrl);\n      if (!response.ok) {\n        showToast('No preview available for this voice yet', 'info');\n        return;\n      }\n\n      const blob = await response.blob();\n      const audioUrl = URL.createObjectURL(blob);\n\n      currentlyPlayingAudio = new Audio(audioUrl);\n      currentlyPlayingVoiceId = voiceId;\n      updatePlayButton(buttonElement, true);\n\n      const stopPlayback = (): void => {\n        URL.revokeObjectURL(audioUrl);\n        if (buttonElement) updatePlayButton(buttonElement, false);\n        currentlyPlayingAudio = null;\n        currentlyPlayingVoiceId = null;\n      };\n\n      currentlyPlayingAudio.onended = stopPlayback;\n      currentlyPlayingAudio.onerror = stopPlayback;\n\n      await currentlyPlayingAudio.play();\n    } catch (error) {\n      console.error('Error playing voice preview:', error);\n      updatePlayButton(buttonElement, false);\n      currentlyPlayingAudio = null;\n      currentlyPlayingVoiceId = null;\n    }\n  }\n\n  function updatePlayButton(buttonElement: HTMLButtonElement, isPlaying: boolean): void {\n    if (!buttonElement) return;\n\n    const icon = isPlaying\n      ? `<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M6 4h4v16H6V4zm8 0h4v16h-4V4z\"/></svg>`\n      : `<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M8 5v14l11-7z\"/></svg>`;\n\n    buttonElement.innerHTML = icon;\n    if (isPlaying) {\n      buttonElement.classList.add('playing');\n    } else {\n      buttonElement.classList.remove('playing');\n    }\n  }\n\n  function setupAutoSaveListeners(): void {\n    if (ttsEnabledCheckbox) ttsEnabledCheckbox.addEventListener('change', () => saveTtsSetting('engineEnabled', !!ttsEnabledCheckbox.checked, 'TTS Engine'));\n    if (botRespondsInChatCheckbox) botRespondsInChatCheckbox.addEventListener('change', () => saveTtsSetting('botRespondsInChat', !!botRespondsInChatCheckbox.checked, 'Bot Responds in Chat'));\n    if (ttsModeSelect) ttsModeSelect.addEventListener('change', () => saveTtsSetting('mode', ttsModeSelect.value || 'command', 'TTS Mode'));\n    if (ttsPermissionSelect) ttsPermissionSelect.addEventListener('change', () => saveTtsSetting('ttsPermissionLevel', ttsPermissionSelect.value || 'everyone', 'TTS Permission'));\n    if (eventsEnabledCheckbox) eventsEnabledCheckbox.addEventListener('change', () => saveTtsSetting('speakEvents', eventsEnabledCheckbox.checked !== false, 'Event Announcements'));\n    if (allowViewerPreferencesCheckbox) allowViewerPreferencesCheckbox.addEventListener('change', () => saveTtsSetting('allowViewerPreferences', !!allowViewerPreferencesCheckbox.checked, 'Allow Viewer Voice Preferences'));\n    if (readFullUrlsCheckbox) readFullUrlsCheckbox.addEventListener('change', () => saveTtsSetting('readFullUrls', !!readFullUrlsCheckbox.checked, 'Read Full URLs'));\n    if (bitsEnabledCheckbox) bitsEnabledCheckbox.addEventListener('change', () => saveTtsSetting('bitsModeEnabled', !!bitsEnabledCheckbox.checked, 'Bits for TTS'));\n    if (bitsAmountInput) {\n      const debouncedBitsAmountSave = debounce(\n        () => saveTtsSetting('bitsMinimumAmount', parseInt(bitsAmountInput.value || '100', 10), 'Minimum Bits'),\n        600\n      );\n      bitsAmountInput.addEventListener('input', () => { if (!isInitializing) debouncedBitsAmountSave(); });\n      bitsAmountInput.addEventListener('change', () => saveTtsSetting('bitsMinimumAmount', parseInt(bitsAmountInput.value || '100', 10), 'Minimum Bits'));\n    }\n\n    if (defaultVoiceSelect) defaultVoiceSelect.addEventListener('change', () => saveTtsSetting('voiceId', defaultVoiceSelect.value || 'Friendly_Person', 'Default Voice'));\n    if (defaultEmotionSelect) defaultEmotionSelect.addEventListener('change', () => saveTtsSetting('emotion', defaultEmotionSelect.value || 'auto', 'Default Emotion'));\n\n    if (defaultPitchSlider) {\n      const debouncedPitchSave = debounce(\n        () => saveTtsSetting('pitch', parseInt(defaultPitchSlider.value || '0', 10), 'Default Pitch'),\n        400\n      );\n      defaultPitchSlider.addEventListener('input', () => { if (!isInitializing) debouncedPitchSave(); });\n      defaultPitchSlider.addEventListener('change', () => saveTtsSetting('pitch', parseInt(defaultPitchSlider.value || '0', 10), 'Default Pitch'));\n    }\n\n    if (defaultSpeedSlider) {\n      const debouncedSpeedSave = debounce(\n        () => saveTtsSetting('speed', parseFloat(defaultSpeedSlider.value || '1.0'), 'Default Speed'),\n        400\n      );\n      defaultSpeedSlider.addEventListener('input', () => { if (!isInitializing) debouncedSpeedSave(); });\n      defaultSpeedSlider.addEventListener('change', () => saveTtsSetting('speed', parseFloat(defaultSpeedSlider.value || '1.0'), 'Default Speed'));\n    }\n\n    if (defaultLanguageSelect) defaultLanguageSelect.addEventListener('change', () => saveTtsSetting('languageBoost', defaultLanguageSelect.value || 'Automatic', 'Default Language'));\n    if (englishNormalizationCheckbox) englishNormalizationCheckbox.addEventListener('change', () => saveTtsSetting('englishNormalization', !!englishNormalizationCheckbox.checked, 'English Normalization'));\n\n    if (musicEnabledCheckbox) musicEnabledCheckbox.addEventListener('change', () => void saveMusicEnabled(!!musicEnabledCheckbox.checked));\n    if (musicModeSelect) musicModeSelect.addEventListener('change', () => void saveMusicAllowedRoles(musicModeSelect.value || 'everyone'));\n    if (musicBitsEnabledCheckbox || musicBitsAmountInput) {\n      const saveBits = (): Promise<void> => saveMusicBitsConfig(\n        !!musicBitsEnabledCheckbox?.checked,\n        parseInt(musicBitsAmountInput?.value || '100', 10)\n      );\n      const debouncedSaveBits = debounce(() => { if (!isInitializing) void saveBits(); }, 600);\n      if (musicBitsEnabledCheckbox) musicBitsEnabledCheckbox.addEventListener('change', () => void saveBits());\n      if (musicBitsAmountInput) {\n        musicBitsAmountInput.addEventListener('input', () => debouncedSaveBits());\n        musicBitsAmountInput.addEventListener('change', () => void saveBits());\n      }\n    }\n  }\n\n  function attachVoicePreview(): void {\n    const playerEl = document.getElementById('voice-preview-player') as HTMLElement | null;\n    const playerElMobile = document.getElementById('voice-preview-player-mobile') as HTMLElement | null;\n    const sourceEl = document.getElementById('voice-preview-source') as HTMLSourceElement | null;\n    const sourceElMobile = document.getElementById('voice-preview-source-mobile') as HTMLSourceElement | null;\n    const hintEl = document.getElementById('voice-preview-hint') as HTMLElement | null;\n    const hintElMobile = document.getElementById('voice-preview-hint-mobile') as HTMLElement | null;\n\n    const clearAudioCache = (isMobile = false): void => {\n      if (isMobile) {\n        if (cachedAudioUrlMobile) {\n          URL.revokeObjectURL(cachedAudioUrlMobile);\n          cachedAudioUrlMobile = null;\n        }\n        cachedSettingsMobile = null;\n        if (playerElMobile) playerElMobile.style.display = 'none';\n        if (voiceTestBtnMobile) voiceTestBtnMobile.textContent = 'Send Preview';\n        isDirtyMobile = false;\n      } else {\n        if (cachedAudioUrl) {\n          URL.revokeObjectURL(cachedAudioUrl);\n          cachedAudioUrl = null;\n        }\n        cachedSettings = null;\n        if (playerEl) playerEl.style.display = 'none';\n        if (voiceTestBtn) voiceTestBtn.textContent = 'Send Preview';\n        isDirty = false;\n      }\n    };\n\n    const markSettingsAsDirty = (): void => {\n      isDirty = true;\n      isDirtyMobile = true;\n      if (hintEl && cachedAudioUrl) hintEl.style.display = 'block';\n      if (hintElMobile && cachedAudioUrlMobile) hintElMobile.style.display = 'block';\n    };\n\n    const testVoice = async (isMobile = false): Promise<void> => {\n      await settingsInitializedPromise;\n\n      const textInput = isMobile ? voiceTestTextInputMobile : voiceTestTextInput;\n      const text = textInput?.value?.trim() || '';\n\n      if (!text) {\n        showToast('Please enter some text to test', 'warning');\n        return;\n      }\n      if (text.length > 500) {\n        showToast('Text must be 500 characters or less', 'error');\n        return;\n      }\n\n      if (testMode) {\n        showToast('Playing preview\u2026 (test mode)', 'success');\n        return;\n      }\n\n      const payload: TTSPayload = {\n        text,\n        ...getEffectiveTtsSettings()\n      };\n\n      const playerElements: PlayerElements = {\n        playerEl,\n        playerElMobile,\n        sourceEl,\n        sourceElMobile\n      };\n\n      const hintElements: HintElements = {\n        hintEl,\n        hintElMobile\n      };\n\n      const onAudioGenerated = (audioUrl: string, settings: TTSPayload): void => {\n        if (isMobile) {\n          if (cachedAudioUrlMobile) URL.revokeObjectURL(cachedAudioUrlMobile);\n          cachedAudioUrlMobile = audioUrl;\n          cachedSettingsMobile = settings;\n          isDirtyMobile = false;\n          if (hintElMobile) hintElMobile.style.display = 'none';\n        } else {\n          if (cachedAudioUrl) URL.revokeObjectURL(cachedAudioUrl);\n          cachedAudioUrl = audioUrl;\n          cachedSettings = settings;\n          isDirty = false;\n          if (hintEl) hintEl.style.display = 'none';\n        }\n      };\n\n      const buttons = [voiceTestBtn, voiceTestBtnMobile].filter((btn): btn is HTMLButtonElement => btn !== null);\n      await performVoiceTest(payload, buttons, {\n        defaultText: 'Welcome, everyone, to the stream!',\n        playerElements,\n        hintElements,\n        onAudioGenerated\n      });\n    };\n\n    if (voiceTestBtn) voiceTestBtn.addEventListener('click', () => void testVoice(false));\n    if (voiceTestBtnMobile) voiceTestBtnMobile.addEventListener('click', () => void testVoice(true));\n\n    const watchDirtyElements = [\n      defaultVoiceSelect, defaultEmotionSelect, defaultPitchSlider,\n      defaultSpeedSlider, defaultLanguageSelect, englishNormalizationCheckbox\n    ];\n    watchDirtyElements.forEach(el => {\n      if (!el) return;\n      el.addEventListener('change', () => {\n        markSettingsAsDirty();\n        if (el === defaultVoiceSelect || el === defaultEmotionSelect) {\n          clearAudioCache(false);\n          clearAudioCache(true);\n        }\n      });\n    });\n\n    window.addEventListener('beforeunload', () => {\n      if (cachedAudioUrl) URL.revokeObjectURL(cachedAudioUrl);\n      if (cachedAudioUrlMobile) URL.revokeObjectURL(cachedAudioUrlMobile);\n    });\n  }\n\n\n  function getChannelName(): string | undefined {\n    return getLoggedInUser()?.login?.toLowerCase();\n  }\n\n  function authHeaders(): Record<string, string> {\n    const headers: Record<string, string> = { 'Content-Type': 'application/json' };\n    const token = getSessionToken();\n    if (token) headers['Authorization'] = `Bearer ${token}`;\n    return headers;\n  }\n\n  function getEffectiveTtsSettings(): Omit<TTSPayload, 'text'> {\n    const voiceId = defaultVoiceSelect?.value || 'Friendly_Person';\n    const emotion = defaultEmotionSelect?.value || 'auto';\n    const pitch = parseInt(defaultPitchSlider?.value || '0', 10);\n    const speed = parseFloat(defaultSpeedSlider?.value || '1.0');\n    const languageBoost = defaultLanguageSelect?.value || 'Automatic';\n    return { voiceId, emotion, pitch, speed, languageBoost };\n  }\n\n  async function saveTtsSetting(key: string, value: string | number | boolean, label: string): Promise<void> {\n    if (isInitializing) return;\n    const channelName = getChannelName();\n    if (testMode) {\n      maybeSuccessToast('Saved');\n      return;\n    }\n    if (!channelName) {\n      showToast('Not logged in', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${botApiBaseUrl}/tts/settings/channel/${channelName}`, {\n        method: 'PUT',\n        headers: authHeaders(),\n        body: JSON.stringify({ key, value })\n      });\n      if (response.ok) {\n        maybeSuccessToast('Saved');\n      } else if (response.status === 403) {\n        const errorData = await response.json().catch(() => ({})) as ErrorResponse;\n        const errorText = errorData.details || errorData.message || 'Channel is not allowed to use this service';\n        const html = errorText.includes('https://detekoi.github.io/#contact-me')\n          ? errorText.replace('https://detekoi.github.io/#contact-me', '<a href=\"https://detekoi.github.io/#contact-me\" target=\"_blank\" class=\"link-light\">this link</a>')\n          : `${errorText} <a href=\"https://detekoi.github.io/#contact-me\" target=\"_blank\" class=\"link-light\">Request access here</a>.`;\n        showToast(html, 'error');\n      } else if (response.status === 500 || response.status === 404) {\n        showToast('Settings management not available yet - bot needs API update', 'warning');\n      } else {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' })) as ErrorResponse;\n        showToast(`${label || 'Setting'}: ${errorData.error}`, 'error');\n      }\n    } catch (error) {\n      console.error('Failed to save setting:', error);\n      showToast(`Failed to save ${label || 'setting'}. Please try again.`, 'error');\n    }\n  }\n\n  async function saveMusicEnabled(enabled: boolean): Promise<void> {\n    if (isInitializing) return;\n    const channelName = getChannelName();\n    if (testMode) {\n      maybeSuccessToast('Saved');\n      return;\n    }\n    if (!channelName) {\n      showToast('Not logged in', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${botApiBaseUrl}/music/settings/channel/${channelName}`, {\n        method: 'PUT',\n        headers: authHeaders(),\n        body: JSON.stringify({ key: 'enabled', value: enabled })\n      });\n      if (response.ok) {\n        maybeSuccessToast('Saved');\n      } else if (response.status === 403) {\n        const errorData = await response.json().catch(() => ({})) as ErrorResponse;\n        const errorText = errorData.details || errorData.message || 'Channel is not allowed to use this service';\n        showToast(`Forbidden: ${errorText}`, 'error');\n      } else if (response.status !== 500 && response.status !== 404) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' })) as ErrorResponse;\n        showToast(`Music Generation: ${errorData.error}`, 'error');\n      } else {\n        showToast('Settings management not available yet - bot needs API update', 'warning');\n      }\n    } catch (e) {\n      showToast('Failed to save Music Generation', 'error');\n    }\n  }\n\n  async function saveMusicAllowedRoles(modeValue: string): Promise<void> {\n    if (isInitializing) return;\n    const channelName = getChannelName();\n    if (testMode) {\n      maybeSuccessToast('Saved');\n      return;\n    }\n    if (!channelName) {\n      showToast('Not logged in', 'error');\n      return;\n    }\n    const roles = modeValue === 'everyone' ? ['everyone'] : ['moderator'];\n    try {\n      const response = await fetch(`${botApiBaseUrl}/music/settings/channel/${channelName}`, {\n        method: 'PUT',\n        headers: authHeaders(),\n        body: JSON.stringify({ key: 'allowedRoles', value: roles })\n      });\n      if (response.ok) {\n        maybeSuccessToast('Saved');\n      } else if (response.status === 403) {\n        const errorData = await response.json().catch(() => ({})) as ErrorResponse;\n        const errorText = errorData.details || errorData.message || 'Channel is not allowed to use this service';\n        showToast(`Forbidden: ${errorText}`, 'error');\n      } else if (response.status !== 500 && response.status !== 404) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' })) as ErrorResponse;\n        showToast(`Music Access: ${errorData.error}`, 'error');\n      } else {\n        showToast('Settings management not available yet - such features require the latest bot update.', 'warning');\n      }\n    } catch (e) {\n      showToast('Failed to save Music Access', 'error');\n    }\n  }\n\n  async function saveMusicBitsConfig(enabled: boolean, minimumAmount: number): Promise<void> {\n    if (isInitializing) return;\n    const channelName = getChannelName();\n    if (testMode) {\n      maybeSuccessToast('Saved');\n      return;\n    }\n    if (!channelName) {\n      showToast('Not logged in', 'error');\n      return;\n    }\n    try {\n      const response = await fetch(`${botApiBaseUrl}/music/settings/channel/${channelName}`, {\n        method: 'PUT',\n        headers: authHeaders(),\n        body: JSON.stringify({ key: 'bitsConfig', value: { enabled, minimumAmount } })\n      });\n      if (response.ok) {\n        maybeSuccessToast('Saved');\n      } else if (response.status === 403) {\n        const errorData = await response.json().catch(() => ({})) as ErrorResponse;\n        const errorText = errorData.details || errorData.message || 'Channel is not allowed to use this service';\n        showToast(`Forbidden: ${errorText}`, 'error');\n      } else if (response.status !== 500 && response.status !== 404) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' })) as ErrorResponse;\n        showToast(`Music Bits: ${errorData.error}`, 'error');\n      } else {\n        showToast('Settings management not available yet - bot needs API update', 'warning');\n      }\n    } catch (e) {\n      showToast('Failed to save Music Bits', 'error');\n    }\n  }\n\n  async function initializeSettingsPanel(): Promise<void> {\n    if (defaultPitchSlider && pitchValueSpan) {\n      defaultPitchSlider.addEventListener('input', () => {\n        pitchValueSpan.textContent = defaultPitchSlider.value;\n      });\n    }\n    if (defaultSpeedSlider && speedValueSpan) {\n      defaultSpeedSlider.addEventListener('input', () => {\n        speedValueSpan.textContent = defaultSpeedSlider.value;\n      });\n    }\n\n    if (resetPitchBtn) {\n      resetPitchBtn.addEventListener('click', () => {\n        if (!defaultPitchSlider || !pitchValueSpan) return;\n        defaultPitchSlider.value = '0';\n        pitchValueSpan.textContent = '0';\n        saveTtsSetting('pitch', 0, 'Default Pitch');\n      });\n    }\n    if (resetSpeedBtn) {\n      resetSpeedBtn.addEventListener('click', () => {\n        if (!defaultSpeedSlider || !speedValueSpan) return;\n        defaultSpeedSlider.value = '1.0';\n        speedValueSpan.textContent = '1.0';\n        saveTtsSetting('speed', 1.0, 'Default Speed');\n      });\n    }\n\n    await loadAvailableVoices();\n    attachVoicePreview();\n    setupAutoSaveListeners();\n\n    if (saveSettingsBtn) {\n      saveSettingsBtn.style.display = 'none';\n      saveSettingsBtn.disabled = true;\n    }\n\n    await loadBotSettings();\n    isInitializing = false;\n    if (voiceTestBtn) voiceTestBtn.disabled = false;\n    if (voiceTestBtnMobile) voiceTestBtnMobile.disabled = false;\n\n    settingsInitialized = true;\n    settingsInitializedPromiseResolve?.();\n  }\n\n  async function loadAvailableVoices(): Promise<void> {\n    const fallbackVoices = [\n      'Friendly_Person', 'Professional_Woman', 'Casual_Male', 'Energetic_Youth',\n      'Warm_Grandmother', 'Confident_Leader', 'Soothing_Narrator', 'Cheerful_Assistant',\n      'Deep_Narrator', 'Bright_Assistant', 'Calm_Guide', 'Energetic_Host'\n    ];\n\n    if (!defaultVoiceSelect) {\n      return;\n    }\n\n    if (testMode) {\n      populateVoices(fallbackVoices);\n      return;\n    }\n\n    try {\n      const response = await fetch(`${botApiBaseUrl}/voices`);\n      if (response.ok) {\n        const voicesData = await response.json() as VoicesResponse;\n        const voices = voicesData.voices || fallbackVoices;\n        populateVoices(voices);\n        return;\n      }\n    } catch (error) {\n      console.warn('Failed to load voices from bot API, using fallback:', error);\n    }\n\n    populateVoices(fallbackVoices);\n  }\n\n  function populateVoices(voices: string[]): void {\n    allVoices = voices;\n    const searchInput = document.getElementById('default-voice-search') as HTMLInputElement | null;\n    const hiddenInput = document.getElementById('default-voice') as HTMLInputElement | null;\n    const dropdown = document.getElementById('default-voice-dropdown') as HTMLElement | null;\n    const menu = document.getElementById('default-voice-menu') as HTMLElement | null;\n    const list = menu?.querySelector('.voice-dropdown-list') as HTMLElement | null;\n\n    if (!searchInput || !hiddenInput || !menu || !list || !dropdown) {\n      console.error('Custom dropdown elements not found');\n      return;\n    }\n\n    hiddenInput.value = hiddenInput.value || 'Friendly_Person';\n    searchInput.value = formatVoiceName(hiddenInput.value);\n\n    renderVoiceList(voices, list);\n\n    searchInput.addEventListener('click', (e) => {\n      e.stopPropagation();\n      const isOpen = menu.classList.contains('show');\n      if (isOpen) {\n        closeDropdown();\n      } else {\n        openDropdown();\n      }\n    });\n\n    searchInput.addEventListener('input', () => {\n      const query = searchInput.value.toLowerCase();\n      const filtered = voices.filter(voice =>\n        formatVoiceName(voice).toLowerCase().includes(query)\n      );\n      renderVoiceList(filtered, list);\n    });\n\n    document.addEventListener('click', (e) => {\n      if (!dropdown.contains(e.target as Node)) {\n        closeDropdown();\n      }\n    });\n\n    function openDropdown(): void {\n      if (!menu || !searchInput) return;\n      menu.classList.add('show');\n      searchInput.removeAttribute('readonly');\n      searchInput.focus();\n      searchInput.select();\n    }\n\n    function closeDropdown(): void {\n      if (!menu || !searchInput) return;\n      menu.classList.remove('show');\n      searchInput.setAttribute('readonly', 'readonly');\n    }\n\n    function renderVoiceList(voicesToRender: string[], container: HTMLElement): void {\n      container.innerHTML = '';\n      if (!voicesToRender.length) {\n        const empty = document.createElement('div');\n        empty.className = 'voice-dropdown-empty';\n        empty.textContent = 'No voices found';\n        container.appendChild(empty);\n        return;\n      }\n\n      voicesToRender.forEach(voice => {\n        const item = document.createElement('div');\n        item.className = 'voice-dropdown-item d-flex justify-content-between align-items-center';\n\n        const label = document.createElement('span');\n        label.textContent = formatVoiceName(voice);\n\n        const button = document.createElement('button');\n        button.type = 'button';\n        button.className = 'btn btn-sm btn-outline-primary voice-play-btn';\n        button.dataset.voiceId = voice;\n        button.innerHTML = `\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n            <path d=\"M8 5v14l11-7z\"/>\n          </svg>\n        `;\n\n        button.addEventListener('click', async (event) => {\n          event.stopPropagation();\n          await playVoiceSample(button, voice);\n        });\n\n        item.addEventListener('click', () => {\n          if (!hiddenInput || !searchInput) return;\n          hiddenInput.value = voice;\n          searchInput.value = formatVoiceName(voice);\n          closeDropdown();\n          saveTtsSetting('voiceId', hiddenInput.value || 'Friendly_Person', 'Default Voice');\n        });\n\n        item.appendChild(label);\n        item.appendChild(button);\n        container.appendChild(item);\n      });\n    }\n\n  }\n\n  async function loadBotSettings(): Promise<void> {\n    const user = getLoggedInUser();\n    if (!user?.login) {\n      console.warn('No logged in user, cannot load bot settings');\n      return;\n    }\n\n    if (testMode) {\n      const demoTts: TtsSettings = {\n        engineEnabled: true,\n        botRespondsInChat: true,\n        mode: 'command',\n        ttsPermissionLevel: 'everyone',\n        speakEvents: true,\n        readFullUrls: false,\n        bitsModeEnabled: true,\n        bitsMinimumAmount: 100,\n        voiceId: 'Friendly_Person',\n        emotion: 'auto',\n        pitch: 0,\n        speed: 1.0,\n        languageBoost: 'Automatic',\n        englishNormalization: false,\n        ignoredUsers: ['spammer1', 'troll2']\n      };\n      const demoMusic: MusicSettings = {\n        enabled: false,\n        allowedRoles: ['everyone'],\n        bitsModeEnabled: false,\n        bitsMinimumAmount: 100,\n        ignoredUsers: ['loudguy']\n      };\n      applyTtsSettings(demoTts);\n      applyMusicSettings(demoMusic);\n      displayIgnoreList('tts', demoTts.ignoredUsers || []);\n      displayIgnoreList('music', demoMusic.ignoredUsers || []);\n      originalSettings = { tts: demoTts, music: demoMusic };\n      return;\n    }\n\n    try {\n      const channelName = user.login.toLowerCase();\n      const headers = authHeaders();\n\n      let ttsData: SettingsResponse = { settings: {} };\n      const ttsResponse = await fetch(`${botApiBaseUrl}/tts/settings/channel/${channelName}`, { headers });\n      if (ttsResponse.status === 403) {\n        const errorData = await ttsResponse.json().catch(() => ({})) as ErrorResponse;\n        const errorText = errorData.details || errorData.message || 'This channel is not permitted to use this service.';\n        const html = errorText.includes('https://detekoi.github.io/#contact-me')\n          ? errorText.replace('https://detekoi.github.io/#contact-me', '<a href=\"https://detekoi.github.io/#contact-me\" target=\"_blank\" class=\"link-light\">this link</a>')\n          : `${errorText} <a href=\"https://detekoi.github.io/#contact-me\" target=\"_blank\" class=\"link-light\">Request access here</a>.`;\n        showToast(html, 'error');\n        return;\n      } else if (ttsResponse.ok) {\n        ttsData = await ttsResponse.json() as SettingsResponse;\n        applyTtsSettings(ttsData.settings as TtsSettings || {});\n      }\n\n      let musicData: SettingsResponse = { settings: {} };\n      const musicResponse = await fetch(`${botApiBaseUrl}/music/settings/channel/${channelName}`, { headers });\n      if (musicResponse.status === 403) {\n        // Music settings not available; skip silently\n      } else if (musicResponse.ok) {\n        musicData = await musicResponse.json() as SettingsResponse;\n        applyMusicSettings(musicData.settings as MusicSettings || {});\n      }\n\n      displayIgnoreList('tts', (ttsData.settings as TtsSettings)?.ignoredUsers || []);\n      displayIgnoreList('music', (musicData.settings as MusicSettings)?.ignoredUsers || []);\n\n      originalSettings = {\n        tts: ttsData.settings as TtsSettings || {},\n        music: musicData.settings as MusicSettings || {}\n      };\n    } catch (error) {\n      console.error('Failed to load bot settings:', error);\n      showToast('Failed to load settings. Please refresh.', 'error');\n    }\n  }\n\n  function applyTtsSettings(settings: TtsSettings): void {\n    if (ttsEnabledCheckbox) ttsEnabledCheckbox.checked = settings.engineEnabled || false;\n    if (botRespondsInChatCheckbox) botRespondsInChatCheckbox.checked = settings.botRespondsInChat !== false;\n    if (ttsModeSelect) ttsModeSelect.value = settings.mode || 'command';\n    if (ttsPermissionSelect) ttsPermissionSelect.value = settings.ttsPermissionLevel || 'everyone';\n    if (eventsEnabledCheckbox) eventsEnabledCheckbox.checked = settings.speakEvents !== false;\n    if (allowViewerPreferencesCheckbox) allowViewerPreferencesCheckbox.checked = settings.allowViewerPreferences !== false;\n    if (readFullUrlsCheckbox) readFullUrlsCheckbox.checked = settings.readFullUrls || false;\n    if (bitsEnabledCheckbox) bitsEnabledCheckbox.checked = settings.bitsModeEnabled || false;\n    if (bitsAmountInput) bitsAmountInput.value = String(settings.bitsMinimumAmount ?? 100);\n    if (defaultVoiceSelect) {\n      defaultVoiceSelect.value = settings.voiceId || 'Friendly_Person';\n      const searchInput = document.getElementById('default-voice-search') as HTMLInputElement | null;\n      if (searchInput) {\n        searchInput.value = formatVoiceName(defaultVoiceSelect.value);\n      }\n    }\n    if (defaultEmotionSelect) defaultEmotionSelect.value = settings.emotion || 'auto';\n    if (defaultPitchSlider) {\n      defaultPitchSlider.value = String(settings.pitch ?? 0);\n      if (pitchValueSpan) pitchValueSpan.textContent = String(settings.pitch ?? 0);\n    }\n    if (defaultSpeedSlider) {\n      defaultSpeedSlider.value = String(settings.speed ?? 1.0);\n      if (speedValueSpan) speedValueSpan.textContent = String(settings.speed ?? 1.0);\n    }\n    if (defaultLanguageSelect) defaultLanguageSelect.value = settings.languageBoost || 'Automatic';\n    if (englishNormalizationCheckbox) englishNormalizationCheckbox.checked = settings.englishNormalization || false;\n  }\n\n  function applyMusicSettings(settings: MusicSettings): void {\n    if (musicEnabledCheckbox) musicEnabledCheckbox.checked = settings.enabled || false;\n    if (musicModeSelect) {\n      const mode = settings.allowedRoles?.includes('everyone') ? 'everyone' : 'moderator';\n      musicModeSelect.value = mode || 'everyone';\n    }\n    if (musicBitsEnabledCheckbox) musicBitsEnabledCheckbox.checked = settings.bitsModeEnabled || false;\n    if (musicBitsAmountInput) musicBitsAmountInput.value = String(settings.bitsMinimumAmount ?? 100);\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
